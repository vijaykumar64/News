{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\K Vijay Kumar\\\\Documents\\\\Project\\\\fetch\\\\frontend\\\\src\\\\News\\\\News.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport NewsItems from './NewsItems';\nimport { Loading } from './Loading';\nimport PropTypes from 'prop-types';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst News = ({\n  country = 'us',\n  pageSize = 12,\n  category = 'general',\n  setProgress\n}) => {\n  _s();\n  const [articles, setArticles] = useState([]);\n  const [page, setPage] = useState(1);\n  const [totalResults, setTotalResults] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const fetchArticles = async () => {\n    setProgress(10);\n    const url = `http://localhost:5000/api/news?page=${page}&category=${category}&pageSize=${pageSize}`;\n    setLoading(true);\n    setProgress(30);\n    try {\n      let data = await fetch(url);\n      setProgress(50);\n      let parsedData = await data.json();\n      setProgress(70);\n      console.log(\"Fetched Page:\", page);\n      console.log(\"Total Results from API:\", parsedData.totalResults);\n      console.log(\"Articles returned:\", parsedData.articles.length);\n      setArticles(parsedData.articles || []);\n      setTotalResults(parsedData.totalResults || 0);\n      setLoading(false);\n      setProgress(100);\n    } catch (error) {\n      console.error(\"Error fetching news:\", error);\n      setLoading(false);\n      setProgress(100);\n    }\n  };\n  useEffect(() => {\n    fetchArticles();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [page, category]); // Refetch when page or category changes\n\n  const handlePrevClick = () => {\n    if (page > 1) {\n      setPage(page - 1);\n    }\n  };\n  const handleNextClick = () => {\n    const maxPages = Math.ceil(Math.min(totalResults, 100) / pageSize);\n    if (page < maxPages) {\n      setPage(page + 1);\n    }\n  };\n\n  // Calculate max pages capped at NewsAPI's 100-result limit\n  const maxPages = Math.ceil(Math.min(totalResults, 100) / pageSize);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container my-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-center\",\n        children: [category.toUpperCase(), \" NEWS\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), loading && /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: !loading && articles.map(element => {\n            if (element.author !== 'null') {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-md-4\",\n                children: /*#__PURE__*/_jsxDEV(NewsItems, {\n                  title: element.title ? element.title.slice(0, 50) : ' ',\n                  description: element.description ? element.description.slice(0, 45) : ' ',\n                  imgUrl: element.urlToImage ? element.urlToImage : 'error.jpg',\n                  url: element.url\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 72,\n                  columnNumber: 23\n                }, this)\n              }, element.url, false, {\n                fileName: _jsxFileName,\n                lineNumber: 71,\n                columnNumber: 21\n              }, this);\n            }\n            return null;\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container d-flex justify-content-between my-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          disabled: page <= 1 || loading,\n          onClick: handlePrevClick,\n          className: \"btn btn-dark\",\n          children: \"\\u2190 Previous\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-muted align-self-center\",\n          children: [\"Page \", page, \" of \", maxPages]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          disabled: page >= maxPages || loading,\n          onClick: handleNextClick,\n          className: \"btn btn-dark\",\n          children: \"Next \\u2192\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n};\n_s(News, \"KBwD7KqjSTD3JN2sSMBnR1zWrC8=\");\n_c = News;\nNews.propTypes = {\n  country: PropTypes.string,\n  pageSize: PropTypes.number,\n  category: PropTypes.string,\n  setProgress: PropTypes.func.isRequired\n};\nexport default News;\nvar _c;\n$RefreshReg$(_c, \"News\");","map":{"version":3,"names":["React","useState","useEffect","NewsItems","Loading","PropTypes","jsxDEV","_jsxDEV","News","country","pageSize","category","setProgress","_s","articles","setArticles","page","setPage","totalResults","setTotalResults","loading","setLoading","fetchArticles","url","data","fetch","parsedData","json","console","log","length","error","handlePrevClick","handleNextClick","maxPages","Math","ceil","min","children","className","toUpperCase","fileName","_jsxFileName","lineNumber","columnNumber","map","element","author","title","slice","description","imgUrl","urlToImage","type","disabled","onClick","_c","propTypes","string","number","func","isRequired","$RefreshReg$"],"sources":["C:/Users/K Vijay Kumar/Documents/Project/fetch/frontend/src/News/News.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport NewsItems from './NewsItems';\r\nimport { Loading } from './Loading';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst News = ({ country = 'us', pageSize = 12, category = 'general', setProgress }) => {\r\n  const [articles, setArticles] = useState([]);\r\n  const [page, setPage] = useState(1);\r\n  const [totalResults, setTotalResults] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const fetchArticles = async () => {\r\n    setProgress(10);\r\n    const url = `http://localhost:5000/api/news?page=${page}&category=${category}&pageSize=${pageSize}`;\r\n    setLoading(true);\r\n    setProgress(30);\r\n\r\n    try {\r\n      let data = await fetch(url);\r\n      setProgress(50);\r\n      let parsedData = await data.json();\r\n      setProgress(70);\r\n\r\n      console.log(\"Fetched Page:\", page);\r\n      console.log(\"Total Results from API:\", parsedData.totalResults);\r\n      console.log(\"Articles returned:\", parsedData.articles.length);\r\n\r\n      setArticles(parsedData.articles || []);\r\n      setTotalResults(parsedData.totalResults || 0);\r\n      setLoading(false);\r\n      setProgress(100);\r\n    } catch (error) {\r\n      console.error(\"Error fetching news:\", error);\r\n      setLoading(false);\r\n      setProgress(100);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchArticles();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [page, category]); // Refetch when page or category changes\r\n\r\n  const handlePrevClick = () => {\r\n    if (page > 1) {\r\n      setPage(page - 1);\r\n    }\r\n  };\r\n\r\n  const handleNextClick = () => {\r\n    const maxPages = Math.ceil(Math.min(totalResults, 100) / pageSize);\r\n    if (page < maxPages) {\r\n      setPage(page + 1);\r\n    }\r\n  };\r\n\r\n  // Calculate max pages capped at NewsAPI's 100-result limit\r\n  const maxPages = Math.ceil(Math.min(totalResults, 100) / pageSize);\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"container my-3\">\r\n        <h2 className=\"text-center\">{category.toUpperCase()} NEWS</h2>\r\n        {loading && <Loading />}\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            {!loading &&\r\n              articles.map((element) => {\r\n                if (element.author !== 'null') {\r\n                  return (\r\n                    <div className=\"col-md-4\" key={element.url}>\r\n                      <NewsItems\r\n                        title={element.title ? element.title.slice(0, 50) : ' '}\r\n                        description={element.description ? element.description.slice(0, 45) : ' '}\r\n                        imgUrl={element.urlToImage ? element.urlToImage : 'error.jpg'}\r\n                        url={element.url}\r\n                      />\r\n                    </div>\r\n                  );\r\n                }\r\n                return null;\r\n              })}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"container d-flex justify-content-between my-3\">\r\n          <button\r\n            type=\"button\"\r\n            disabled={page <= 1 || loading}\r\n            onClick={handlePrevClick}\r\n            className=\"btn btn-dark\"\r\n          >\r\n            &larr; Previous\r\n          </button>\r\n          <p className=\"text-muted align-self-center\">Page {page} of {maxPages}</p>\r\n          <button\r\n            type=\"button\"\r\n            disabled={page >= maxPages || loading}\r\n            onClick={handleNextClick}\r\n            className=\"btn btn-dark\"\r\n          >\r\n            Next &rarr;\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nNews.propTypes = {\r\n  country: PropTypes.string,\r\n  pageSize: PropTypes.number,\r\n  category: PropTypes.string,\r\n  setProgress: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default News;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}